<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCPæ€§èƒ½è¯Šæ–­å·¥å…·</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #0f0;
        }
        .metric {
            margin: 10px 0;
            padding: 10px;
            background: #2a2a2a;
            border-left: 3px solid #0f0;
        }
        .warning { border-left-color: #ff0; color: #ff0; }
        .error { border-left-color: #f00; color: #f00; }
        #timeline { margin-top: 20px; }
        .resource {
            padding: 5px;
            margin: 2px 0;
            background: #333;
        }
    </style>
</head>
<body>
    <h1>ğŸ” LCP æ€§èƒ½è¯Šæ–­æŠ¥å‘Š</h1>
    <div id="metrics"></div>
    <div id="timeline"></div>

    <script>
        // ç›‘æ§ LCP
        new PerformanceObserver((list) => {
            const entries = list.getEntries();
            const lastEntry = entries[entries.length - 1];
            
            const div = document.createElement('div');
            div.className = lastEntry.renderTime > 2500 ? 'metric error' : 'metric';
            div.innerHTML = `
                <strong>ğŸ¯ LCP å…ƒç´ :</strong> ${lastEntry.element?.tagName || 'Unknown'}<br>
                <strong>â±ï¸ LCP æ—¶é—´:</strong> ${lastEntry.renderTime.toFixed(2)}ms<br>
                <strong>ğŸ“¦ èµ„æº URL:</strong> ${lastEntry.url || 'N/A'}<br>
                <strong>â¬‡ï¸ åŠ è½½æ—¶é—´:</strong> ${lastEntry.loadTime?.toFixed(2) || 'N/A'}ms<br>
                <strong>ğŸ–¼ï¸ æ¸²æŸ“å»¶è¿Ÿ:</strong> ${(lastEntry.renderTime - lastEntry.loadTime).toFixed(2)}ms
            `;
            document.getElementById('metrics').appendChild(div);
        }).observe({ entryTypes: ['largest-contentful-paint'] });

        // ç›‘æ§æ‰€æœ‰èµ„æºåŠ è½½
        window.addEventListener('load', () => {
            const resources = performance.getEntriesByType('resource');
            const timeline = document.getElementById('timeline');
            
            timeline.innerHTML = '<h2>ğŸ“Š èµ„æºåŠ è½½æ—¶é—´çº¿</h2>';
            
            // æŒ‰åŠ è½½æ—¶é—´æ’åº
            resources.sort((a, b) => b.duration - a.duration);
            
            resources.forEach(resource => {
                const div = document.createElement('div');
                div.className = 'resource';
                const duration = resource.duration.toFixed(2);
                const className = duration > 1000 ? 'error' : duration > 500 ? 'warning' : '';
                
                div.innerHTML = `
                    <span class="${className}">${duration}ms</span> - 
                    ${resource.initiatorType} - 
                    ${resource.name.split('/').pop() || resource.name}
                `;
                timeline.appendChild(div);
            });

            // æ£€æŸ¥èƒŒæ™¯å›¾åŠ è½½
            const bgCheck = document.createElement('div');
            bgCheck.className = 'metric warning';
            bgCheck.innerHTML = `
                <h3>âš ï¸ å…³é”®å‘ç°</h3>
                <p>æ£€æŸ¥æ˜¯å¦æœ‰æ¥è‡ª api.suyanw.cn çš„è¯·æ±‚ï¼ˆåŠ¨æ€èƒŒæ™¯å›¾ï¼‰</p>
                <p>è¿™å¯èƒ½æ˜¯å¯¼è‡´ LCP å»¶è¿Ÿçš„ä¸»è¦åŸå› </p>
            `;
            document.getElementById('metrics').appendChild(bgCheck);
        });
    </script>
</body>
</html>
